
# 功能介绍

### 一、投注

   登录MetaMask后，点击“投注1ETH”按钮即可完成投注操作，会从当前钱包地址扣除1ETH代币放入合约地址中

### 二、开奖
    
   当前MetaMask为管理员时，会显示“开奖”按钮。点击后就会随机选择投注者中的1名，将奖金池中90%奖励给此地址，剩余的10%则会给予管理员。
   选择随机赢家方式：将当前时间、区块的挖矿难度、彩民数量一同进行哈希，转换成一个【大数字】后去模【投注彩民个数】，得到的n就是指第n名彩民是赢家。

### 三、退奖

   当前MetaMask为管理员时，会显示“退奖”按钮。会将当前奖金池中的所有币原路退回给投注者。

### 四、界面显示

   显示内容为如下几点：
   - 管理员地址（部署合约时的当前登录钱包地址，既为管理员）
   - 当前地址（当前MetaMask登录的钱包地址）
   - 上期中奖地址
   - 参与人数（当前期的投注人数）
   - 奖金池
   - 开奖期数（每次“开奖”完成后就会+1）
   - 查看交易历史（若为Ropsten网络，则会跳转到etherscan.org查看当前合约的详细信息）



---

# 使用
   `注：浏览器需要安装MetaMask`
### 1.启动Ganache客户端（支持Infura代理和Ropsten网络）

    ganache-cli -p 7545

启动完成后记录下助记码，登入到MetaMask中

### 2.合约部署

文件02-deploy.js配置好web3的provider，本项目指定的是ganache客户端的HTTP://127.0.0.1:7545，然后运行此js

    node 02-deploy.js

运行完后日志会打印出部署完成合约的address，记录下来后在步骤3内使用

### 3.初始化智能合约实例

将步骤2获得的address，配置在src/eth/lotteryInstance.js中的变量address

### 4.启动react项目

    npm run start 或 yarn start








